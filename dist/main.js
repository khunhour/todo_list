(()=>{"use strict";function e(e){const t=document.querySelector(".title");console.log(t),t.textContent=e.textContent}function t(e){e.target.matches("[data-drag]")&&(e.target.parentNode.draggable=!0)}function n(e){e.addEventListener("dragstart",(()=>{e.classList.add("dragging")})),e.addEventListener("dragend",(()=>{e.classList.remove("dragging"),e.draggable=!1}))}function o(e){e.preventDefault();const t=document.querySelector(".project"),n=document.querySelector(".dragging"),o=document.querySelector("#projectForm"),c=(d=e.clientY,[...document.querySelectorAll(".project .tile:not(.dragging)")].reduce(((e,t)=>{const n=t.getBoundingClientRect(),o=d-n.top-n.height/2;return o<0&&o>e.offset?{offset:o,element:t}:e}),{offset:Number.NEGATIVE_INFINITY}).element);var d;null==c?t.insertBefore(n,o):t.insertBefore(n,c)}const c=e=>{let t=document.getElementById("projectInput").value;l(t),r(),e.preventDefault()},d=()=>{document.querySelector("#projectForm").classList.remove("hidden"),document.getElementById("projectInput").focus()},r=()=>{const e=document.querySelector("#projectForm");document.querySelector("#projectInput").value="",e.classList.add("hidden")},l=e=>{let t=s();const o=document.querySelector(".project"),c=document.querySelector("#projectForm"),d=document.createElement("div");d.setAttribute("data-project",`${t}`),d.classList.add("tile"),o.insertBefore(d,c);const r=a("menu");r.setAttribute("data-drag",""),d.appendChild(r);const l=document.createElement("div");l.classList.add("projectInfo"),l.tabIndex="0",d.appendChild(l);const i=document.createElement("div");i.classList.add("projectName"),i.textContent=e,l.appendChild(i);const u=document.createElement("div");u.classList.add("editProject"),u.setAttribute("data-dropdown",""),d.appendChild(u);const m=a("more_vert");m.setAttribute("data-dropdown-button",""),u.appendChild(m),n(d)},a=e=>{const t=document.createElement("span");return t.classList.add("material-icons-round"),t.textContent=e,t},s=()=>document.querySelectorAll("[data-project]").length;function i(t){let n=t.target.closest(".home .tile"),o=t.target.closest(".project .tile");if(null!=n){const t=n.querySelector("[data-name]");u(n),e(t)}else{if(null==o)return;{const t=o.querySelector(".projectName");u(o),e(t)}}}const u=e=>{document.querySelector(".selected").classList.remove("selected"),e.classList.add("selected")},m=e=>{let t=e.target.parentNode.parentNode,n=t.parentNode;n.dataset.project,p(t),!0===g()&&(E(),y()),f(n),v(),document.getElementById("projectRenameInput").focus(),n.classList.add("hidden")},p=e=>{e.classList.remove("active")},g=()=>null!=document.querySelector("#renameForm"),f=e=>{let t=e.querySelector(".projectName").textContent;const n=document.createElement("form");n.setAttribute("id","renameForm"),n.setAttribute("autocomplete","off"),n.classList.add("hidden"),e.parentNode.insertBefore(n,e);const o=document.createElement("div");o.classList.add("projectIcon"),n.appendChild(o);const c=a("menu");o.appendChild(c);const d=document.createElement("div");d.classList.add("inputField"),n.appendChild(d);const r=document.createElement("input");r.type="text",r.id="projectRenameInput",r.value=t,d.appendChild(r);const l=document.createElement("div");l.classList.add("formButtons"),d.appendChild(l);const s=document.createElement("input");s.classList.add("rename-renameBtn"),s.type="submit",s.value="Rename",l.appendChild(s);const i=document.createElement("input");i.classList.add("rename-cancelBtn"),i.type="button",i.value="Cancel",l.appendChild(i),s.addEventListener("click",(function(t){L(e),t.preventDefault()})),i.addEventListener("click",(function(){E(),y()}))},v=()=>{const e=document.querySelector("#renameForm");setTimeout((function(){e.classList.remove("hidden")}),1)},L=t=>{let n=document.getElementById("projectRenameInput").value;const o=t.querySelector(".projectName");o.textContent=n,y(),e(o),E()},y=()=>{document.querySelector("div.hidden").classList.remove("hidden")},E=()=>{document.querySelector("#renameForm").remove()},h=t=>{let n=t.target.parentNode.parentNode.parentNode.dataset.project;const o=document.querySelector(`[data-project="${n}"]`);if(o.classList.contains("selected")){const t=document.querySelector("#today"),n=t.querySelector("[data-name]");t.classList.add("selected"),e(n)}!function(){const e=document.querySelector(".project .option"),t=document.querySelector(".project");e.classList.add("hidden"),t.appendChild(e)}(),o.remove(),S(n)},S=e=>{document.querySelectorAll("[data-project]").forEach((t=>{t.dataset.project>e&&(t.dataset.project=t.dataset.project-1)}))};document.querySelector("#addList").addEventListener("click",(()=>{document.querySelector("#listForm").classList.remove("hidden")})),document.querySelector(".listCancelBtn").addEventListener("click",(e=>{const t=document.querySelector("#listForm");document.querySelector("#listInput").value="",t.classList.add("hidden")})),document.getElementById("listForm").addEventListener("submit",(function(e){console.log()})),document.querySelector(".list-todo").addEventListener("click",(function(e){let t=e.target,n=e.target.matches(".star-outline"),o=e.target.matches(".unchecked"),c=e.target.matches(".delete"),d=e.target.matches("[data-title]");if(console.log(t),n)!function(e){let t=e.target;t.classList.toggle("listHidden");let n=e.target.nextElementSibling;n.classList.toggle("listHidden"),console.log(n),console.log(t)}(e);else if(o)!function(e){let t=e.target,n=e.target.nextElementSibling,o=e.target.closest("li");t.classList.toggle("checked"),n.classList.toggle("lineThrough"),o.classList.toggle("fade")}(e);else if(c)!function(e){e.target.closest("li").remove()}(e);else{if(!d)return;!function(e){e.target.nextElementSibling.classList.toggle("hidden")}(e)}})),document.querySelector(".projectCancelBtn").addEventListener("click",r),document.getElementById("addProject").addEventListener("click",d),document.getElementById("projectForm").addEventListener("submit",c),document.querySelector(".leftPanel").addEventListener("click",i),document.querySelectorAll(".option").forEach((e=>{e.firstElementChild.addEventListener("click",m),e.lastElementChild.addEventListener("click",h)})),document.addEventListener("click",(e=>{const t=e.target.matches("[data-dropdown-button]");if(!t&&null!=e.target.closest("[data-dropdown]"))return;let n;t&&(function(e){let t=e.target.parentNode;const n=document.querySelector(".project .option");n.classList.remove("hidden"),t.appendChild(n),setTimeout((function(){console.log("timeout")}),0)}(e),n=e.target.closest("[data-dropdown]"),setTimeout((function(){n.classList.toggle("active")}),1)),document.querySelectorAll("[data-dropdown].active").forEach((e=>{e!==n&&e.classList.remove("active")}))})),function(){const e=document.querySelector(".project");e.addEventListener("mousedown",t),document.querySelectorAll(".project .tile").forEach((e=>{n(e)})),e.addEventListener("dragover",o)}(),console.log("yo maama")})();